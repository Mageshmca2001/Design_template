<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Update Chart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mui/material@5.15.5/dist/material-ui.min.js"></script>
    <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
</head>

<body class="bg-gray-100 font-sans">
    <!-- Main Container -->
    <div class="max-w-7xl mx-auto p-6">
        <!-- Title and Header -->
        <div class="flex justify-between items-center bg-white shadow-md p-4 rounded-lg">
            <h1 class="text-xl font-bold text-gray-700">ðŸ“ˆ Real-Time Chart</h1>
            <button class="px-4 py-2 bg-blue-500 text-white rounded-md shadow-md hover:bg-blue-600">
                Refresh Data
            </button>
        </div>

        <!-- Chart Container -->
        <div id="chartContainer" class="mt-6 h-80 bg-white rounded-lg shadow-md">
            <!-- Chart will render here -->
        </div>
    </div>

    <script type="text/javascript">
        window.onload = function () {
            const dataPoints = [];
            let chart;

            // Fetch initial data
            $.getJSON("https://canvasjs.com/services/data/datapoints.php?xstart=1&ystart=10&length=10&type=json", function (data) {
                data.forEach(value => {
                    dataPoints.push({ x: value[0], y: parseInt(value[1]) });
                });

                // Initialize Chart
                chart = new CanvasJS.Chart("chartContainer", {
                    animationEnabled: true,
                    theme: "light2",
                    title: {
                        text: "Live Data Updates",
                        fontColor: "#4B5563",
                        fontFamily: "sans-serif",
                    },
                    axisY: {
                        includeZero: false,
                    },
                    data: [{
                        type: "line",
                        markerType: "circle",
                        markerColor: "#1D4ED8",
                        lineColor: "#2563EB",
                        dataPoints: dataPoints,
                    }]
                });

                chart.render();
                updateChart();
            });

            // Update data periodically
            function updateChart() {
                const lastY = dataPoints[dataPoints.length - 1].y;
                const xStart = dataPoints.length + 1;

                $.getJSON(`https://canvasjs.com/services/data/datapoints.php?xstart=${xStart}&ystart=${lastY}&length=1&type=json`, function (data) {
                    data.forEach(value => {
                        dataPoints.push({ x: parseInt(value[0]), y: parseInt(value[1]) });
                    });
                    chart.render();
                    setTimeout(updateChart, 1000);
                });
            }
        }
    </script>
</body>

</html>
